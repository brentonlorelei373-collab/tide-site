---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<Layout title="博客" description="Tide 团队的思考、技术分享与产品更新。">

  <section class="bg-[var(--color-bg)]">
    <div class="max-w-[680px] mx-auto px-6 pt-20 pb-12 md:pt-28 md:pb-16">
      <h1 class="text-4xl md:text-5xl font-semibold tracking-tight text-[var(--color-primary)] animate-fade-up">
        博客
      </h1>
      <p class="mt-4 text-lg text-[var(--color-text-secondary)] animate-fade-up-delay-1">
        思考、分享与记录。
      </p>
    </div>
  </section>

  <section class="bg-[var(--color-bg)]">
    <div class="max-w-[680px] mx-auto px-6 pb-20 md:pb-28">
      {posts.length === 0 ? (
        <p class="text-[var(--color-text-tertiary)] text-center py-12">
          暂无文章，敬请期待。
        </p>
      ) : (
        <div class="divide-y divide-[var(--color-border-light)]">
          {posts.map((post) => (
            <article class="py-8 first:pt-0">
              <a href={`/blog/${post.id}`} class="group block">
                <time class="text-xs text-[var(--color-text-tertiary)] font-mono">
                  {post.data.date.toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                  })}
                </time>
                <h2 class="mt-2 text-xl md:text-2xl font-semibold text-[var(--color-primary)] group-hover:text-[var(--color-accent)] transition-colors">
                  {post.data.title}
                </h2>
                <p class="mt-2 text-sm text-[var(--color-text-secondary)] leading-relaxed line-clamp-2">
                  {post.data.description}
                </p>
                <span class="mt-3 inline-block text-sm text-[var(--color-accent)] font-medium">
                  阅读全文 →
                </span>
              </a>
            </article>
          ))}
        </div>
      )}
    </div>
  </section>

</Layout>
